<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Operator Overlay</title>
  <style>
    :root {
      --app-bg: #e7edf4;
      --panel-bg: #f9fbfe;
      --panel-bg-alt: #eef3f8;
      --text: #1b2430;
      --text-muted: #5a6778;
      --border: #c9d3df;
      --accent: #1a5fbf;
    }
    body {
      margin: 0;
      background: transparent;
      font-family: sans-serif;
      color: var(--text);
    }

    .overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.35);
      z-index: 2000;
      padding: 20px;
      box-sizing: border-box;
    }

    .overlay.open {
      display: flex;
    }

    .modal {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      width: min(520px, 90vw);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }

    .modalHeader {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      background: var(--panel-bg-alt);
    }

    .modalBody {
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modalFooter {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      padding: 10px 12px;
      border-top: 1px solid var(--border);
      background: var(--panel-bg-alt);
    }

    .small {
      font-size: 12px;
      color: var(--text-muted);
    }

    .wideModal {
      width: min(980px, 96vw);
    }

    .llmTable {
      display: grid;
      grid-template-columns: 120px 160px 1fr 1fr 40px;
      gap: 8px;
      align-items: center;
    }

    .llmTableHeader {
      font-size: 11px;
      color: #666;
      font-weight: 600;
    }

    .llmTable input {
      width: 100%;
      padding: 6px 8px;
      box-sizing: border-box;
      font-size: 12px;
      border: 1px solid var(--border);
      background: var(--panel-bg);
      color: var(--text);
    }

    .llmTable button {
      padding: 4px 6px;
      font-size: 12px;
    }

    button {
      border: 1px solid var(--border);
      background: var(--panel-bg-alt);
      color: var(--text);
      border-radius: 6px;
    }

    button.primary {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }

    .appearanceList {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .appearanceItem {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      background: var(--panel-bg);
      cursor: pointer;
    }

    .appearanceItem.selected {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(26, 95, 191, 0.2);
    }

    .appearanceActions {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .appearanceMeta {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .appearanceLabel {
      font-size: 13px;
      font-weight: 600;
    }

    .appearanceRow {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1 1 auto;
      min-width: 0;
    }

    .appearanceEditor {
      margin-top: 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
      background: var(--panel-bg);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .appearanceGrid {
      display: grid;
      gap: 8px;
    }

    .appearanceSwatchGrid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 6px 8px;
    }

    .appearanceSwatchRow {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 6px;
      padding: 4px 6px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--panel-bg-alt);
    }

    .appearanceSwatchInput {
      width: 30px;
      height: 20px;
      padding: 0;
      border: 1px solid var(--border);
      border-radius: 4px;
      background: var(--panel-bg);
      cursor: pointer;
      font-size: 0;
    }

    .appearanceSwatchControls {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 6px;
    }

    .appearanceAlphaToggle {
      width: 18px;
      height: 18px;
      border: 1px solid var(--border);
      border-radius: 4px;
      background: var(--panel-bg);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--text-muted);
      padding: 0;
    }

    .appearanceSwatchAlpha {
      display: none;
    }

    .alphaPopup {
      position: fixed;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.18);
      z-index: 3000;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .alphaPopup.open {
      display: inline-flex;
    }

    .alphaSlider {
      writing-mode: bt-lr;
      -webkit-appearance: slider-vertical;
      width: 24px;
      height: 120px;
    }

    .alphaValueInput {
      width: 60px;
      font-size: 12px;
    }

    .appearanceGrid input[type="text"] {
      width: 100%;
      padding: 6px 8px;
      box-sizing: border-box;
      font-size: 12px;
    }

    .appearancePreviewBox {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
      background: var(--panel-bg-alt);
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 10px;
    }

    .appearancePreviewSidebar {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .appearancePreviewButton {
      background: var(--accent);
      color: #fff;
      border: 1px solid var(--accent);
      padding: 6px 8px;
      border-radius: 6px;
      font-size: 12px;
      text-align: center;
    }

    .appearancePreviewCard {
      background: var(--panel-bg-alt);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 6px;
      font-size: 11px;
      color: var(--text);
    }

    .appearancePreviewMain {
      background: var(--app-bg);
      border: 1px dashed var(--border);
      border-radius: 6px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      color: var(--text);
    }
  </style>
</head>

<body>
  <div id="gettingStartedOverlay" class="overlay" aria-hidden="true">
    <div class="modal">
      <div class="modalHeader">
        <div>Getting started</div>
        <button id="gettingStartedClose">X</button>
      </div>
      <div class="modalBody">
        <div class="small">Choose workspace</div>
        <div class="small">Paste bootstrap prompt into the chat</div>
        <div class="small">Run the interface spec command and paste the result back</div>
        <div class="small">Review commands in the inbox and run them</div>
      </div>
      <div class="modalFooter">
        <button id="gettingStartedCloseFooter">Close</button>
      </div>
    </div>
  </div>
  <div id="llmProfilesOverlay" class="overlay" aria-hidden="true">
    <div class="modal wideModal">
      <div class="modalHeader">
        <div>LLM Profiles</div>
        <button id="llmClose">X</button>
      </div>
      <div class="modalBody">
        <div class="small" style="margin-bottom:8px;">Add or edit LLM start URLs and allowed hosts (comma separated).</div>
        <div class="llmTable llmTableHeader">
          <div>ID</div>
          <div>Label</div>
          <div>Start URL</div>
          <div>Allowed hosts</div>
          <div></div>
        </div>
        <div id="llmProfilesBody" class="llmTable" style="margin-top:6px;"></div>
        <div class="row" style="margin-top:10px;">
          <button id="llmAdd">Add profile</button>
        </div>
      </div>
      <div class="modalFooter">
        <button id="llmReset">Reset to defaults</button>
        <button id="llmCancel">Close</button>
        <button id="llmSave">Save</button>
      </div>
    </div>
  </div>
  <div id="appearanceOverlay" class="overlay" aria-hidden="true">
    <div class="modal wideModal">
      <div class="modalHeader">
        <div>Appearance</div>
        <button id="appearanceClose">X</button>
      </div>
      <div class="modalBody">
        <div class="small" style="margin-bottom:8px;">Choose a visual style for the Operator UI.</div>
        <div id="appearanceList" class="appearanceList"></div>
        <div class="row" style="justify-content:space-between; margin-top:10px;">
          <button id="appearanceAdd">Add appearance</button>
          <button id="appearanceRemove">Remove selected</button>
        </div>
      </div>
      <div class="modalFooter">
        <button id="appearanceReset">Reset to defaults</button>
        <button id="appearanceCancel">Cancel</button>
        <button id="appearanceSave">Save</button>
      </div>
    </div>
  </div>
  <div id="appearanceEditorOverlay" class="overlay" aria-hidden="true">
    <div class="modal wideModal">
      <div class="modalHeader">
        <div>Edit appearance</div>
        <button id="appearanceEditorClose">X</button>
      </div>
      <div class="modalBody">
        <div class="appearanceEditor">
          <div class="appearanceGrid">
            <div class="small">ID</div>
            <input id="appearanceId" type="text" />
            <div class="small">Label</div>
            <input id="appearanceLabel" type="text" />

            <div id="appearanceSwatchGrid" class="appearanceSwatchGrid"></div>
          </div>
        </div>
        <div class="appearancePreviewBox" id="appearanceEditorPreview">
          <div class="appearancePreviewSidebar">
            <div class="small">Sidebar</div>
            <div class="appearancePreviewButton">Primary Action</div>
            <div class="appearancePreviewCard">Secondary</div>
            <div class="appearancePreviewCard" style="color: var(--text-muted);">Muted text</div>
            <div class="appearancePreviewCard" style="background: var(--accent-muted); border-color: var(--accent);">Accent muted</div>
            <div class="appearancePreviewCard" style="color: var(--error);">Error text</div>
            <div class="appearancePreviewCard" style="color: var(--warning);">Warning text</div>
          </div>
          <div class="appearancePreviewMain">
            <div class="small">Main area</div>
            <div class="appearancePreviewCard">Card content</div>
            <div class="appearancePreviewCard" style="background: var(--panel-bg-alt);">Panel alt</div>
            <div class="appearancePreviewCard" style="border-color: var(--border);">Border preview</div>
            <div class="appearancePreviewCard" style="background: var(--toast-bg); color: var(--toast-text); border-color: var(--toast-bg);">Toast preview</div>
            <div class="appearancePreviewCard" style="background: var(--toast-error-bg); color: var(--toast-text); border-color: var(--toast-error-bg);">Toast error</div>
          </div>
        </div>
      </div>
      <div class="modalFooter">
        <button id="appearanceEditorCopy">Copy definition</button>
        <button id="appearanceEditorPaste">Paste definition</button>
        <button id="appearanceEditorCancel">Cancel</button>
        <button id="appearanceEditorSave">Save</button>
      </div>
    </div>
  </div>
  <div id="alphaPopup" class="alphaPopup" aria-hidden="true">
    <input id="alphaSlider" class="alphaSlider" type="range" min="0" max="100" step="1" />
    <input id="alphaValue" class="alphaValueInput" type="number" min="0" max="1" step="0.01" />
  </div>
  <script src="./overlay.js"></script>
</body>

</html>
